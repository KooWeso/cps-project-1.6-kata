@use './modules/module-bundle'as *;

// media query at md
@mixin mediaShow ($boolean) {

    $display-property: none; // for overlay, etc.
    $position-for-sidemenu: fixed; // for side menu only

    // for side menu only
    @if ($boolean) {
        $position-for-sidemenu: relative;
        $display-property: block;
    }

    position: fixed;

    @media (min-width: $breakpoint-md) {
        position: $position-for-sidemenu;
        display: $display-property;
    }
}

@mixin defState() {
    //size by default
    width: 100%;
    height: 100%;
    // transition -->
    transition: transform 0.3s ease-in-out, opacity 0.5s ease-in-out;
    transform: translateX(-100%);
    @media (min-width: $breakpoint-md) {
        transform: translateX(0%) !important;
    }
    // <--
}
// for side-menu elements
@mixin mediaHide () {
    @media (min-width: $breakpoint-md) {
        display: none !important;
    }
}

.side-menu {
    z-index: 10;
    position: absolute;
    max-width: $breakpoint-xs;
    background: $background-light;

    @include defState();

    @include mediaShow(true);

    // 360px 
    @media (max-width: $breakpoint-xsm) {
        max-width: $breakpoint-xsm;
    }

    &__btn-close {
        @include mediaHide();
    }

    // content -->
    &__content {
        overflow-y: scroll;
        z-index: 10;
        // stays with scroll
        position: sticky; //not going anywhere unlike fixed :)
        top: 0;
        //
        height: 100vh;
        padding: $space;

        display: flex; // flex !!!!!!!
        flex-direction: column;
        gap: 1rem;

        box-shadow: 1.5rem 0 2rem 0 $shadow;
        @media (min-width: $breakpoint-md) {
            box-shadow: none;
        }


    }

    &__top {
        display: flex; // flex !!!!!!!
        align-items: center;
        gap: 1rem;

        & > *:last-child {
            margin-left: auto;
        }
    }

    &__mid {
        flex: 1;
    }
    
    &__mid-list {
        display: flex; // flex !!!!!!!
        flex-direction: column;
    }

    &__mid-item {
        
        &:hover,
        &:focus {
            background: $background-dark;
            border-radius: .5rem;
        }

        & > button {
            display: inline-block;
            width: 100%;
            padding: .75rem 0;
            text-align: left;
        }
    }

    &__bottom {
        display: flex; // flex !!!!!!!
        flex-direction: column;
    }

     &__contact {
        display: flex; // flex !!!!!!!
        flex-direction: column;
        gap: 1rem;
     }

     &__contact-list {
         display: flex; // flex !!!!!!!
         gap: 1rem;
     }

     &__mail {
         @include fontReg();
         color: $text;
     }

     &__phone {
         @include fontBold();
         color: $text;
     }

     &__lang {
        margin-top: 1rem;
        display: flex; // flex !!!!!!!
        gap: 1rem;
     }
    // <-- content

    // other stuff -->

    &__overlay {

        background: $background-light;
        opacity: 0; // change with js later

        @include defState();
        @include mediaShow(false);
        @include mediaHide();
        // unset
        transform: unset;
        width: 200vw;
    }

    &__blur {

        backdrop-filter: blur(.2rem);

        @include defState();
        @include mediaShow(false);
        @include mediaHide();

    }

    &__debug {
        // for debug only
        width: 100%;
        height: 1700px;
        background-color: bisque;

    }

    &--hidden {
        display: none;
    
        @media (min-width: $breakpoint-md) {
            display: block;
        }
    }
}